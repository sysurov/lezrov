# 机器鱼原理图及PCB Layout  
### 分文件说明：  
- 单关节机器鱼通信架构v1.0.pdf  
机器鱼的通讯架构，实际上也是机器鱼的硬件模块组织。
可以看到在机器鱼内部是使用UART环路进行数据发送的（源码中所写的波特率是115200），环路的起点是Wrtnode的Tx脚，每一节点需要实现一个状态机（可参考官方源码，具有一定的可移植性），判断包内信息的Id是否是自己的Id，如果是的话就处理并发送处理结果到下一个节点，不是的话就直接把上一个节点发来的数据包向下传递。
通讯协议:
```
| 包头 | 类型 | 长度 |   Id  | 命令  | 参数  | 校验  | 包尾 |
| 0x21 | 1位  | 7位  | 1字节 | 1字节 | n字节 | 1字节 | 0x52 |
类型： 1.写命令 0.读数据
长度： Id+命令+参数 的长度，单位为字节
校验： Id+命令+参数 的校验和
```

- Wrtnode.pdf :  
“视觉仓”与wifi部分。内部有摄像头模块和Wrtnode模块（型号不明，可能需要拆解，看是否是第三方产品），它们之间通过USB通讯。Wrtnode负责进行wifi收发，并将接收到的内容通过UART交给板载STM32，STM32通过另一个UART界面向后续模块发送信息。（源码里有用的只有UART.c，这么点功能还用了一块STM32F103C8，真鸡儿浪费）

- 
- 
